# ë§ˆì¸í¬ë˜í”„íŠ¸ ì—ì´ì „íŠ¸ ë¸”ë¡ ì½”ë”© - ì•„í‚¤í…ì²˜ ë¬¸ì„œ

## ëª©ì°¨
1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì „ì²´ ì•„í‚¤í…ì²˜](#ì „ì²´-ì•„í‚¤í…ì²˜)
3. [ì„œë²„ ì•„í‚¤í…ì²˜](#ì„œë²„-ì•„í‚¤í…ì²˜)
4. [í´ë¼ì´ì–¸íŠ¸ ì•„í‚¤í…ì²˜](#í´ë¼ì´ì–¸íŠ¸-ì•„í‚¤í…ì²˜)
5. [ë°ì´í„° íë¦„](#ë°ì´í„°-íë¦„)
6. [ëª…ë ¹ì–´ ì‹¤í–‰ ê³¼ì •](#ëª…ë ¹ì–´-ì‹¤í–‰-ê³¼ì •)
7. [ë¸”ë¡ ì‹œìŠ¤í…œ](#ë¸”ë¡-ì‹œìŠ¤í…œ)
8. [ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ](#ì´ë²¤íŠ¸-ì‹œìŠ¤í…œ)

---

## ì‹œìŠ¤í…œ ê°œìš”

### ëª©ì 
ë§ˆì¸í¬ë˜í”„íŠ¸ ë² ë“œë½ ì—ë””ì…˜ì˜ ì—ì´ì „íŠ¸ë¥¼ Blockly ê¸°ë°˜ì˜ ì‹œê°ì  í”„ë¡œê·¸ë˜ë°ìœ¼ë¡œ ì œì–´í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜

### í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ
- **ë°±ì—”ë“œ**: Node.js, Express, WebSocket (ws), Socket.IO
- **í”„ë¡ íŠ¸ì—”ë“œ**: Blockly, vanilla JavaScript, Socket.IO Client
- **í”„ë¡œí† ì½œ**: Minecraft Code Connection Protocol
- **ë¹Œë“œ**: pkg (ì‹¤í–‰ íŒŒì¼ ìƒì„±)

### ì£¼ìš” íŠ¹ì§•
- ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹ 
- ì´ë²¤íŠ¸ ê¸°ë°˜ ë¸”ë¡ ì‹¤í–‰
- ë™ì  í¬íŠ¸ í• ë‹¹
- ë©€í‹°í”Œë ˆì´ì–´ ì§€ì›

---

## ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì‚¬ìš©ì ë¸Œë¼ìš°ì €                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Admin Page       â”‚              â”‚  Blockly Editor      â”‚  â”‚
â”‚  â”‚  (admin.html)      â”‚              â”‚  (index.html)        â”‚  â”‚
â”‚  â”‚                    â”‚              â”‚                      â”‚  â”‚
â”‚  â”‚ - ì„œë²„ ìƒíƒœ í‘œì‹œ    â”‚              â”‚ - ë¸”ë¡ ì‘ì„± UI       â”‚  â”‚
â”‚  â”‚ - ì—°ê²° ëª…ë ¹ì–´ í‘œì‹œ  â”‚              â”‚ - ì½”ë“œ ì‹¤í–‰ ì œì–´     â”‚  â”‚
â”‚  â”‚ - ë„¤íŠ¸ì›Œí¬ ì„¤ì •     â”‚              â”‚ - Socket.IO Client   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                                     â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                     â”‚
            â”‚ HTTP                                â”‚ Socket.IO
            â”‚                                     â”‚ (ì‹¤ì‹œê°„ í†µì‹ )
            â–¼                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Node.js ì„œë²„ (server/index.js)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Express      â”‚  â”‚ Socket.IO    â”‚  â”‚ WebSocket Server    â”‚  â”‚
â”‚  â”‚ Server       â”‚  â”‚ Server       â”‚  â”‚ (ws)                â”‚  â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚ Port:        â”‚  â”‚ ì‹¤ì‹œê°„       â”‚  â”‚ Port: 3000-3050     â”‚  â”‚
â”‚  â”‚ 4000-4050    â”‚  â”‚ ì´ë²¤íŠ¸ í†µì‹   â”‚  â”‚                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                      â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              ëª…ë ¹ì–´ ë ˆì§€ìŠ¤íŠ¸ë¦¬ (Maps)                      â”‚  â”‚
â”‚  â”‚  - commandBlocks: ì±„íŒ… ëª…ë ¹ì–´ â†’ {blockId, socket}        â”‚  â”‚
â”‚  â”‚  - itemBlocks: ì•„ì´í…œ íšë“ â†’ {blockId, socket}           â”‚  â”‚
â”‚  â”‚  - itemUsedBlocks: ì•„ì´í…œ ì‚¬ìš© â†’ {blockId, socket}       â”‚  â”‚
â”‚  â”‚  - blockPlacedBlocks: ë¸”ë¡ ì„¤ì¹˜ â†’ {blockId, socket}      â”‚  â”‚
â”‚  â”‚  - blockBrokenBlocks: ë¸”ë¡ íŒŒê´´ â†’ {blockId, socket}      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ WebSocket
                              â”‚ (Code Connection Protocol)
                              â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    Minecraft Bedrock Edition        â”‚
            â”‚                                     â”‚
            â”‚  - ì—ì´ì „íŠ¸ ì‹¤í–‰                     â”‚
            â”‚  - ì´ë²¤íŠ¸ ì „ì†¡                       â”‚
            â”‚  - ëª…ë ¹ì–´ ìˆ˜ì‹                        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì„œë²„ ì•„í‚¤í…ì²˜

### íŒŒì¼ êµ¬ì¡°
```
server/
â”œâ”€â”€ index.js (3069 lines) - ëª¨ë†€ë¦¬ì‹ ì„œë²„ íŒŒì¼
â”œâ”€â”€ handlers/ (Legacy) - ì´ì „ì— ì‚¬ìš©ëœ í•¸ë“¤ëŸ¬ í´ë”
â””â”€â”€ websocket/ (Legacy) - ì´ì „ì— ì‚¬ìš©ëœ ì›¹ì†Œì¼“ í´ë”
```

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸

#### 1. WebSocket ì„œë²„ (Minecraft ì—°ê²°ìš©)
```javascript
const wss = new WebSocket.Server({ port: wsPort });
```

**ì—­í• :**
- Minecraft Code Connection í”„ë¡œí† ì½œ ì²˜ë¦¬
- Minecraftë¡œë¶€í„° ì´ë²¤íŠ¸ ìˆ˜ì‹ 
- Minecraftë¡œ ëª…ë ¹ì–´ ì „ì†¡

**ì²˜ë¦¬í•˜ëŠ” ì´ë²¤íŠ¸:**
- `PlayerMessage`: ì±„íŒ… ë©”ì‹œì§€ (ëª…ë ¹ì–´ íŠ¸ë¦¬ê±°)
- `ItemAcquired`: ì•„ì´í…œ íšë“
- `ItemUsed`: ì•„ì´í…œ ì‚¬ìš©
- `BlockPlaced`: ë¸”ë¡ ì„¤ì¹˜
- `BlockBroken`: ë¸”ë¡ íŒŒê´´

#### 2. Express ì„œë²„ (ì›¹ ì¸í„°í˜ì´ìŠ¤ ì œê³µ)
```javascript
const app = express();
const server = http.createServer(app);
```

**ì—­í• :**
- ì •ì  íŒŒì¼ ì„œë¹™ (HTML, CSS, JS)
- Admin í˜ì´ì§€ ì œê³µ
- API ì—”ë“œí¬ì¸íŠ¸ ì œê³µ

**ì£¼ìš” ë¼ìš°íŠ¸:**
- `GET /`: Blockly ì—ë””í„° í˜ì´ì§€
- `GET /admin`: ê´€ë¦¬ì í˜ì´ì§€
- `GET /api/status`: ì„œë²„ ìƒíƒœ ì •ë³´
- `POST /api/network-setup`: ë„¤íŠ¸ì›Œí¬ ì„¤ì • ì‹¤í–‰

#### 3. Socket.IO ì„œë²„ (í´ë¼ì´ì–¸íŠ¸ í†µì‹ ìš©)
```javascript
const io = new Server(server, {
    cors: { origin: `http://localhost:${wsPort}`, methods: ["GET", "POST"] }
});
```

**ì—­í• :**
- ì›¹ í´ë¼ì´ì–¸íŠ¸ì™€ ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹ 
- ë¸”ë¡ ë“±ë¡ ì •ë³´ ìˆ˜ì‹ 
- ë¸”ë¡ ì‹¤í–‰ ëª…ë ¹ ì „ì†¡
- ì—ì´ì „íŠ¸ ëª…ë ¹ ìˆ˜ì‹  ë° ì „ë‹¬

#### 4. ëª…ë ¹ì–´ ë ˆì§€ìŠ¤íŠ¸ë¦¬ (In-Memory Maps)
```javascript
let commandBlocks = new Map();         // ì±„íŒ… ëª…ë ¹ì–´ â†’ {blockId, socket}
let itemBlocks = new Map();            // ì•„ì´í…œ íšë“ â†’ {blockId, socket}
let itemUsedBlocks = new Map();        // ì•„ì´í…œ ì‚¬ìš© â†’ {blockId, socket}
let blockPlacedBlocks = new Map();     // ë¸”ë¡ ì„¤ì¹˜ â†’ {blockId, socket}
let blockBrokenBlocks = new Map();     // ë¸”ë¡ íŒŒê´´ â†’ {blockId, socket}
```

**íŠ¹ì§•:**
- O(1) ì¡°íšŒ ì„±ëŠ¥
- ì¤‘ë³µ ë“±ë¡ ë°©ì§€
- ë™ì  ë“±ë¡/í•´ì œ

### í¬íŠ¸ ê´€ë¦¬ ì‹œìŠ¤í…œ

```javascript
async function findAvailablePort(startPort, endPort) {
    for (let port = startPort; port <= endPort; port++) {
        if (!(await portCheck(port))) {
            return port;
        }
    }
    return null;
}
```

**í¬íŠ¸ ë²”ìœ„:**
- WebSocket: 3000-3050 (50ê°œ í¬íŠ¸ ì¤‘ ì‚¬ìš© ê°€ëŠ¥í•œ ì²« ë²ˆì§¸ í¬íŠ¸)
- Express: 4000-4050 (50ê°œ í¬íŠ¸ ì¤‘ ì‚¬ìš© ê°€ëŠ¥í•œ ì²« ë²ˆì§¸ í¬íŠ¸)

**ì¥ì :**
- í¬íŠ¸ ì¶©ëŒ ìë™ íšŒí”¼
- ë™ì‹œì— ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ ì‹¤í–‰ ê°€ëŠ¥
- ì‚¬ìš©ìê°€ í¬íŠ¸ ì„¤ì •í•  í•„ìš” ì—†ìŒ

---

## í´ë¼ì´ì–¸íŠ¸ ì•„í‚¤í…ì²˜

### íŒŒì¼ êµ¬ì¡°
```
client/
â”œâ”€â”€ index.html - ë©”ì¸ UI (Blockly ì›Œí¬ìŠ¤í˜ì´ìŠ¤)
â”œâ”€â”€ main.js - ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ (Socket.IO í´ë¼ì´ì–¸íŠ¸, ì‹¤í–‰ ì—”ì§„)
â””â”€â”€ blockly/
    â”œâ”€â”€ blocks.js - ì»¤ìŠ¤í…€ ë¸”ë¡ ì •ì˜ (~1400 lines)
    â””â”€â”€ generators.js - JavaScript ì½”ë“œ ìƒì„±ê¸° (~1000 lines)
```

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸

#### 1. Blockly ì›Œí¬ìŠ¤í˜ì´ìŠ¤
```javascript
workspace = Blockly.inject('blocklyDiv', {
    toolbox: document.getElementById('toolbox'),
    theme: customTheme,
    scrollbars: true,
    trashcan: true
});
```

**êµ¬ì„± ìš”ì†Œ:**
- Toolbox: ì‚¬ìš© ê°€ëŠ¥í•œ ë¸”ë¡ ì¹´í…Œê³ ë¦¬
- Workspace: ë¸”ë¡ì„ ë°°ì¹˜í•˜ê³  ì¡°ë¦½í•˜ëŠ” ìº”ë²„ìŠ¤
- Trashcan: ë¸”ë¡ ì‚­ì œ ì˜ì—­

#### 2. Socket.IO í´ë¼ì´ì–¸íŠ¸
```javascript
let socket = io();
```

**ì£¼ìš” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ:**
- `connect`: ì„œë²„ ì—°ê²° ì‹œ
- `disconnect`: ì„œë²„ ì—°ê²° í•´ì œ ì‹œ
- `executeCommand`: ë¸”ë¡ ì‹¤í–‰ ìš”ì²­ ìˆ˜ì‹ 
- `executeItemCommands`: ì•„ì´í…œ íšë“ ë¸”ë¡ ì‹¤í–‰
- `executeItemUsedCommands`: ì•„ì´í…œ ì‚¬ìš© ë¸”ë¡ ì‹¤í–‰
- `executeBlockPlacedCommands`: ë¸”ë¡ ì„¤ì¹˜ ì´ë²¤íŠ¸ ì‹¤í–‰
- `executeBlockBrokenCommands`: ë¸”ë¡ íŒŒê´´ ì´ë²¤íŠ¸ ì‹¤í–‰

#### 3. ë¸”ë¡ ì‹¤í–‰ ì—”ì§„
```javascript
socket.on('executeCommand', async function(blockId) {
    const targetBlock = workspace.getAllBlocks().find(block => block.id === blockId);
    let nextBlock = targetBlock.getInputTargetBlock('NEXT');

    while (nextBlock) {
        const blockCode = Blockly.JavaScript.blockToCode(nextBlock, ...);
        await eval(blockCode);
        nextBlock = nextBlock.getNextBlock();
    }
});
```

**ì‹¤í–‰ ê³¼ì •:**
1. blockIdë¡œ ì‹œì‘ ë¸”ë¡ ì°¾ê¸°
2. ì—°ê²°ëœ ë‹¤ìŒ ë¸”ë¡ ìˆœíšŒ
3. ê° ë¸”ë¡ì„ JavaScript ì½”ë“œë¡œ ë³€í™˜
4. `eval()`ë¡œ ì½”ë“œ ì‹¤í–‰
5. ë¹„ë™ê¸° ì²˜ë¦¬ (await)

#### 4. ë¸”ë¡ ë“±ë¡ ì‹œìŠ¤í…œ
```javascript
workspace.addChangeListener(function(event) {
    if (event.type === Blockly.Events.BLOCK_CHANGE ||
        event.type === Blockly.Events.BLOCK_CREATE) {
        // ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì˜ Hat ë¸”ë¡ ì°¾ê¸°
        const hatBlocks = workspace.getTopBlocks(true).filter(block =>
            block.type === 'on_chat_command' ||
            block.type === 'on_item_use' || ...
        );

        // ê° Hat ë¸”ë¡ ì •ë³´ë¥¼ ì„œë²„ì— ë“±ë¡
        hatBlocks.forEach(block => {
            socket.emit('updateExecutionCommand', {
                command: block.getFieldValue('COMMAND'),
                blockId: block.id
            });
        });
    }
});
```

**ìë™ ë“±ë¡:**
- ë¸”ë¡ ìƒì„±/ìˆ˜ì • ì‹œ ìë™ìœ¼ë¡œ ì„œë²„ì— ë“±ë¡
- Hat ë¸”ë¡ (on_chat_command, on_item_use ë“±)ë§Œ ë“±ë¡
- ë¸”ë¡ ì‚­ì œ ì‹œ ìë™ìœ¼ë¡œ ë“±ë¡ í•´ì œ

---

## ë°ì´í„° íë¦„

### 1. ë¸”ë¡ ë“±ë¡ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‚¬ìš©ìê°€ ë¸”ë¡ ìƒì„± â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Blockly ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë³€ê²½ ê°ì§€  â”‚
â”‚ (ChangeListener)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hat ë¸”ë¡ ì •ë³´ ì¶”ì¶œ              â”‚
â”‚ - ë¸”ë¡ íƒ€ì… (on_chat_command ë“±)â”‚
â”‚ - ë¸”ë¡ ID (ê³ ìœ  ì‹ë³„ì)         â”‚
â”‚ - ëª…ë ¹ì–´/ì•„ì´í…œ/ë¸”ë¡ íƒ€ì…        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Socket.IO
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì„œë²„: Socket.IO ì´ë²¤íŠ¸ ìˆ˜ì‹      â”‚
â”‚ (updateExecutionCommand ë“±)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì¤‘ë³µ ê²€ì‚¬                       â”‚
â”‚ - ê°™ì€ ëª…ë ¹ì–´ê°€ ì´ë¯¸ ë“±ë¡ë¨?    â”‚
â”‚ - YES: ì—ëŸ¬ ì´ë²¤íŠ¸ ì „ì†¡         â”‚
â”‚ - NO: ê³„ì† ì§„í–‰                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mapì— ë“±ë¡                      â”‚
â”‚ commandBlocks.set(command, {   â”‚
â”‚   blockId: blockId,            â”‚
â”‚   socket: socket               â”‚
â”‚ })                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë“±ë¡ í™•ì¸ ë¡œê·¸ ì¶œë ¥              â”‚
â”‚ "ì´ ë“±ë¡ëœ ëª…ë ¹ì–´ ìˆ˜: N"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ëª…ë ¹ì–´ ì‹¤í–‰ í”Œë¡œìš° (ì±„íŒ… ëª…ë ¹ì–´ ì˜ˆì‹œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë§ˆì¸í¬ë˜í”„íŠ¸ì—ì„œ ì±„íŒ… ì…ë ¥ â”‚
â”‚ ì˜ˆ: "ì•ˆë…•"                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ WebSocket
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì„œë²„: WebSocket ë©”ì‹œì§€ ìˆ˜ì‹      â”‚
â”‚ event: PlayerMessage           â”‚
â”‚ data: { body: { message: "ì•ˆë…•" } }â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë©”ì‹œì§€ íŒŒì‹±                     â”‚
â”‚ message = data.body.message    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mapì—ì„œ ëª…ë ¹ì–´ ì¡°íšŒ             â”‚
â”‚ blockData = commandBlocks      â”‚
â”‚   .get("ì•ˆë…•")                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
      ë“±ë¡ë¨?
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
   NO         YES
    â”‚          â”‚
    â–¼          â–¼
 â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚ë¬´ì‹œ â”‚  â”‚ Socket.IOë¡œ ì‹¤í–‰  â”‚
 â””â”€â”€â”€â”€â”€â”˜  â”‚ ìš”ì²­ ì „ì†¡         â”‚
          â”‚ socket.emit(      â”‚
          â”‚  'executeCommand',â”‚
          â”‚  blockId          â”‚
          â”‚ )                 â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Socket.IO
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ í´ë¼ì´ì–¸íŠ¸: ì‹¤í–‰ ì´ë²¤íŠ¸ ìˆ˜ì‹  â”‚
          â”‚ on('executeCommand')       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ blockIdë¡œ ë¸”ë¡ ì°¾ê¸°         â”‚
          â”‚ targetBlock = workspace    â”‚
          â”‚   .getAllBlocks()          â”‚
          â”‚   .find(b => b.id===blockId)â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ ì—°ê²°ëœ ë¸”ë¡ë“¤ ìˆœíšŒ ì‹¤í–‰     â”‚
          â”‚ while (nextBlock) {        â”‚
          â”‚   - ì½”ë“œ ìƒì„±               â”‚
          â”‚   - eval() ì‹¤í–‰            â”‚
          â”‚   - ë‹¤ìŒ ë¸”ë¡ìœ¼ë¡œ ì´ë™      â”‚
          â”‚ }                          â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ ê° ë¸”ë¡ì—ì„œ Socket.IOë¡œ     â”‚
          â”‚ ì—ì´ì „íŠ¸ ëª…ë ¹ ì „ì†¡           â”‚
          â”‚ socket.emit('goforward')   â”‚
          â”‚ socket.emit('place', ...)  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Socket.IO
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ ì„œë²„: ì—ì´ì „íŠ¸ ëª…ë ¹ ìˆ˜ì‹      â”‚
          â”‚ on('goforward')            â”‚
          â”‚ on('place')                â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Minecraft ëª…ë ¹ìœ¼ë¡œ ë³€í™˜     â”‚
          â”‚ "agent move forward"       â”‚
          â”‚ "agent place forward"      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ WebSocket
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ ë§ˆì¸í¬ë˜í”„íŠ¸ë¡œ ëª…ë ¹ ì „ì†¡     â”‚
          â”‚ WebSocket.send(command)    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ ë§ˆì¸í¬ë˜í”„íŠ¸ì—ì„œ ëª…ë ¹ ì‹¤í–‰   â”‚
          â”‚ ì—ì´ì „íŠ¸ê°€ ì‹¤ì œë¡œ ì›€ì§ì„     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ì•„ì´í…œ íšë“ ì´ë²¤íŠ¸ í”Œë¡œìš°

```
ë§ˆì¸í¬ë˜í”„íŠ¸ì—ì„œ ì•„ì´í…œ íšë“
         â”‚
         â”‚ WebSocket (ItemAcquired Event)
         â–¼
ì„œë²„: ì´ë²¤íŠ¸ íŒŒì‹± ë° ì•„ì´í…œ íƒ€ì… ì¶”ì¶œ
         â”‚
         â–¼
itemBlocks Mapì—ì„œ ì¡°íšŒ
         â”‚
         â–¼
ë“±ë¡ëœ ë¸”ë¡ì´ ìˆìœ¼ë©´ Socket.IOë¡œ ì‹¤í–‰ ìš”ì²­
         â”‚
         â”‚ Socket.IO (executeItemCommands)
         â–¼
í´ë¼ì´ì–¸íŠ¸: í•´ë‹¹ ë¸”ë¡ ì‹¤í–‰
         â”‚
         â–¼
ì—ì´ì „íŠ¸ ëª…ë ¹ ì „ì†¡ â†’ ë§ˆì¸í¬ë˜í”„íŠ¸ ì‹¤í–‰
```

---

## ëª…ë ¹ì–´ ì‹¤í–‰ ê³¼ì •

### ë¸”ë¡ ì½”ë“œ ìƒì„± (Generators)

ê° ë¸”ë¡ì€ JavaScript ì½”ë“œ ìƒì„±ê¸°ë¥¼ í†µí•´ ì‹¤í–‰ ê°€ëŠ¥í•œ ì½”ë“œë¡œ ë³€í™˜ë©ë‹ˆë‹¤.

#### ì˜ˆì‹œ 1: ì—ì´ì „íŠ¸ ì´ë™ ë¸”ë¡

**ë¸”ë¡ ì •ì˜ (blocks.js):**
```javascript
Blockly.Blocks['agent_move'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("ì—ì´ì „íŠ¸ë¥¼")
            .appendField(new Blockly.FieldDropdown([
                ["ì•ìœ¼ë¡œ", "forward"],
                ["ë’¤ë¡œ", "back"],
                ["ìœ„ë¡œ", "up"],
                ["ì•„ë˜ë¡œ", "down"]
            ]), "DIRECTION");
        this.appendValueInput("DISTANCE")
            .setCheck("Number")
            .appendField("ì¹¸ ì´ë™");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
    }
};
```

**ì½”ë“œ ìƒì„±ê¸° (generators.js):**
```javascript
Blockly.JavaScript['agent_move'] = function(block) {
    const direction = block.getFieldValue('DIRECTION');
    const distance = Blockly.JavaScript.valueToCode(block, 'DISTANCE', ...) || '1';

    let command = '';
    switch(direction) {
        case 'forward': command = 'goforward'; break;
        case 'back': command = 'goBack'; break;
        // ...
    }

    return `
        await (async () => {
            for (let i = 0; i < ${distance}; i++) {
                await new Promise(resolve => {
                    socket.emit("${command}");
                    setTimeout(resolve, 200);
                });
            }
        })();
    `;
};
```

**ìƒì„±ëœ ì½”ë“œ:**
```javascript
await (async () => {
    for (let i = 0; i < 5; i++) {
        await new Promise(resolve => {
            socket.emit("goforward");
            setTimeout(resolve, 200);
        });
    }
})();
```

#### ì˜ˆì‹œ 2: ë¸”ë¡ ì„¤ì¹˜ ë¸”ë¡

**ì½”ë“œ ìƒì„±ê¸°:**
```javascript
Blockly.JavaScript['set_block'] = function(block) {
    const position = Blockly.JavaScript.valueToCode(block, 'POSITION', ...) || '...';
    const blockType = Blockly.JavaScript.valueToCode(block, 'BLOCK_TYPE', ...) || '"stone"';

    return `
        await (async () => {
            const positionData = ${position};
            const pos = JSON.parse(positionData);

            await new Promise(resolve => {
                socket.emit("setblock", {
                    x: pos.x,
                    y: pos.y,
                    z: pos.z,
                    blockType: ${blockType},
                    isAbsolute: pos.isAbsolute,
                    isLocal: pos.isLocal
                });
                setTimeout(resolve, 150);
            });
        })();
    `;
};
```

### ì„œë²„ ì¸¡ ëª…ë ¹ ì²˜ë¦¬

#### Socket.IO ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬

```javascript
io.on('connection', (clientSocket) => {
    // ì—ì´ì „íŠ¸ ì•ìœ¼ë¡œ ì´ë™
    clientSocket.on("goforward", () => {
        ws.send("agent move forward");
        console.log('â¡ï¸ ì•ìœ¼ë¡œ ì´ë™');
    });

    // ë¸”ë¡ ì„¤ì¹˜
    clientSocket.on("setblock", (data) => {
        let prefix = data.isAbsolute ? '' : '~';
        if (data.isLocal) prefix = '^';

        const command = `setblock ${prefix}${data.x} ${prefix}${data.y} ${prefix}${data.z} ${data.blockType}`;
        ws.send(command);
        console.log('ğŸ—ï¸ ë¸”ë¡ ì„¤ì¹˜:', command);
    });

    // ë¸”ë¡ íŒŒê´´
    clientSocket.on("destroy", (direction) => {
        ws.send(`agent destroy ${direction}`);
        console.log('ğŸ’¥ ë¸”ë¡ íŒŒê´´:', direction);
    });
});
```

---

## ë¸”ë¡ ì‹œìŠ¤í…œ

### Hat ë¸”ë¡ (ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±°)

Hat ë¸”ë¡ì€ ë‹¤ë¥¸ ë¸”ë¡ë“¤ì˜ ì‹œì‘ì  ì—­í• ì„ í•˜ë©°, íŠ¹ì • ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

#### 1. ì±„íŒ… ëª…ë ¹ì–´ ë¸”ë¡ (on_chat_command)

```javascript
Blockly.Blocks['on_chat_command'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("ğŸ® ì±„íŒ… ëª…ë ¹ì–´:")
            .appendField(new Blockly.FieldTextInput("ì•ˆë…•"), "COMMAND");
        this.appendStatementInput("NEXT")
            .setCheck(null);
        this.setStyle('hat_blocks');
        this.setDeletable(true);
    }
};
```

**ë“±ë¡ ì´ë²¤íŠ¸:** `updateExecutionCommand`
**íŠ¸ë¦¬ê±°:** Minecraft ì±„íŒ…ì—ì„œ ëª…ë ¹ì–´ ì…ë ¥
**ì‹¤í–‰ ì´ë²¤íŠ¸:** `executeCommand`

#### 2. ì•„ì´í…œ íšë“ ë¸”ë¡ (on_item_use)

```javascript
Blockly.Blocks['on_item_use'] = {
    init: function() {
        this.appendValueInput("ITEM")
            .appendField("ğŸ“¦ ì•„ì´í…œ íšë“:");
        this.appendStatementInput("NEXT");
        this.setStyle('hat_blocks');
    }
};
```

**ë“±ë¡ ì´ë²¤íŠ¸:** `updateItemUseCommand`
**íŠ¸ë¦¬ê±°:** Minecraftì—ì„œ ì•„ì´í…œ íšë“
**ì‹¤í–‰ ì´ë²¤íŠ¸:** `executeItemCommands`

#### 3. ì•„ì´í…œ ì‚¬ìš© ë¸”ë¡ (on_item_used)

**ë“±ë¡ ì´ë²¤íŠ¸:** `updateItemUsedCommand`
**íŠ¸ë¦¬ê±°:** Minecraftì—ì„œ ì•„ì´í…œ ì‚¬ìš© (ìš°í´ë¦­ ë“±)
**ì‹¤í–‰ ì´ë²¤íŠ¸:** `executeItemUsedCommands`

#### 4. ë¸”ë¡ ì„¤ì¹˜ ë¸”ë¡ (on_block_placed)

**ë“±ë¡ ì´ë²¤íŠ¸:** `updateBlockPlacedCommand`
**íŠ¸ë¦¬ê±°:** Minecraftì—ì„œ ë¸”ë¡ ì„¤ì¹˜
**ì‹¤í–‰ ì´ë²¤íŠ¸:** `executeBlockPlacedCommands`

#### 5. ë¸”ë¡ íŒŒê´´ ë¸”ë¡ (on_block_broken)

**ë“±ë¡ ì´ë²¤íŠ¸:** `updateBlockBrokenCommand`
**íŠ¸ë¦¬ê±°:** Minecraftì—ì„œ ë¸”ë¡ íŒŒê´´
**ì‹¤í–‰ ì´ë²¤íŠ¸:** `executeBlockBrokenCommands`

### ì¢Œí‘œ ì‹œìŠ¤í…œ

#### ìƒëŒ€ ì¢Œí‘œ (Relative - ~)
```javascript
Blockly.JavaScript.forBlock['coordinate_pos'] = function(block) {
    const x = ..., y = ..., z = ...;
    const posObj = `{"x": ${x}, "y": ${y}, "z": ${z}, "isAbsolute": false}`;
    return [`JSON.stringify(${posObj})`, ...];
};
```
**ì‚¬ìš© ì˜ˆ:** `~3 ~1 ~0` (í˜„ì¬ ìœ„ì¹˜ì—ì„œ X+3, Y+1)

#### ì ˆëŒ€ ì¢Œí‘œ (Absolute)
```javascript
Blockly.JavaScript.forBlock['world_pos'] = function(block) {
    const x = ..., y = ..., z = ...;
    const posObj = `{"x": ${x}, "y": ${y}, "z": ${z}, "isAbsolute": true}`;
    return [`JSON.stringify(${posObj})`, ...];
};
```
**ì‚¬ìš© ì˜ˆ:** `100 64 200` (ì›”ë“œì˜ ê³ ì •ëœ ìœ„ì¹˜)

#### ë¡œì»¬ ì¢Œí‘œ (Local/Facing - ^)
```javascript
Blockly.JavaScript['facing_pos'] = function(block) {
    const x = ..., y = ..., z = ...;
    const posObj = `{"x": ${x}, "y": ${y}, "z": ${z}, "isFacing": true}`;
    return [`JSON.stringify(${posObj})`, ...];
};
```
**ì‚¬ìš© ì˜ˆ:** `^0 ^1 ^3` (ë°”ë¼ë³´ëŠ” ë°©í–¥ ê¸°ì¤€ ì• 3ì¹¸, ìœ„ 1ì¹¸)

---

## ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ

### Minecraft ì´ë²¤íŠ¸ êµ¬ì¡°

#### PlayerMessage ì´ë²¤íŠ¸
```json
{
    "header": {
        "eventName": "PlayerMessage",
        "messagePurpose": "event"
    },
    "body": {
        "message": "ì•ˆë…•",
        "sender": "í”Œë ˆì´ì–´ì´ë¦„",
        "properties": {
            "Message": "ì•ˆë…•"
        }
    }
}
```

#### ItemAcquired ì´ë²¤íŠ¸
```json
{
    "header": {
        "eventName": "ItemAcquired"
    },
    "body": {
        "item": {
            "id": "minecraft:diamond",
            "itemType": "diamond"
        },
        "count": 1
    }
}
```

#### BlockPlaced ì´ë²¤íŠ¸
```json
{
    "header": {
        "eventName": "BlockPlaced"
    },
    "body": {
        "block": {
            "id": "minecraft:stone",
            "type": "stone"
        },
        "position": {
            "x": 100,
            "y": 64,
            "z": 200
        }
    }
}
```

### ì´ë²¤íŠ¸ íŒŒì‹± ë¡œì§

ì„œë²„ëŠ” ë‹¤ì–‘í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ê²½ë¡œì—ì„œ ê°’ì„ ì¶”ì¶œí•©ë‹ˆë‹¤:

```javascript
// ë©”ì‹œì§€ ì¶”ì¶œ
let message = null;
if (data.body.message) {
    message = data.body.message;
} else if (data.body.properties && data.body.properties.Message) {
    message = data.body.properties.Message;
}

// ì•„ì´í…œ íƒ€ì… ì¶”ì¶œ
let itemType = null;
if (data.body.item && data.body.item.id) {
    itemType = data.body.item.id;
} else if (data.body.item && data.body.item.itemType) {
    itemType = data.body.item.itemType;
} else if (data.body.itemType) {
    itemType = data.body.itemType;
}

// ë¸”ë¡ íƒ€ì… ì¶”ì¶œ
let blockType = null;
if (data.body.block && data.body.block.id) {
    blockType = data.body.block.id;
} else if (data.body.block && data.body.block.type) {
    blockType = data.body.block.type;
} else if (data.body.blockType) {
    blockType = data.body.blockType;
}
```

---

## ë©€í‹°í”Œë ˆì´ì–´ ì§€ì›

### í”Œë ˆì´ì–´ ì»¨í…ìŠ¤íŠ¸ ì‹¤í–‰

```javascript
function executeAsPlayer(player, command) {
    if (player && player !== 'Unknown') {
        return `execute "${player}" ~ ~ ~ ${command}`;
    }
    return command;
}
```

**ì‘ë™ ë°©ì‹:**
- í˜¸ìŠ¤íŠ¸: ëª…ë ¹ì–´ê°€ ì§ì ‘ ì‹¤í–‰ë¨
- ê²ŒìŠ¤íŠ¸: ëª…ë ¹ì–´ê°€ `execute` ëª…ë ¹ìœ¼ë¡œ ê°ì‹¸ì ¸ì„œ ì‹¤í–‰ë¨

**ì œí•œ ì‚¬í•­:**
- ê²ŒìŠ¤íŠ¸ëŠ” ì—ì´ì „íŠ¸ ëª…ë ¹ ì‚¬ìš© ë¶ˆê°€
- ì¼ë¶€ ë¸”ë¡ ì´ë²¤íŠ¸ëŠ” í˜¸ìŠ¤íŠ¸ë§Œ ê°ì§€ ê°€ëŠ¥

---

## ë³´ì•ˆ ë° ì œí•œ ì‚¬í•­

### 1. eval() ì‚¬ìš©
- ë¸”ë¡ ìƒì„± ì½”ë“œëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” Blockly ìƒì„±ê¸°ì—ì„œ ìƒì„±
- ì‚¬ìš©ì ì…ë ¥ì€ ë¸”ë¡ í•„ë“œ ê°’ìœ¼ë¡œë§Œ ì œí•œ
- ì§ì ‘ì ì¸ ì½”ë“œ ì…ë ¥ì€ ë¶ˆê°€ëŠ¥

### 2. ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬
- localhost ì—°ê²°ë§Œ í—ˆìš©
- Minecraft UWP ì•± loopback ì˜ˆì™¸ í•„ìš”
- ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼ ì—†ìŒ

### 3. ëª…ë ¹ì–´ ê²€ì¦
```javascript
function sendPlayerCommand(player, command, commandType = 'ëª…ë ¹ì–´') {
    if (!command || typeof command !== 'string') {
        console.error(`âŒ ${commandType} ì˜¤ë¥˜: ìœ íš¨í•˜ì§€ ì•Šì€ ëª…ë ¹ì–´`, command);
        return null;
    }
    // ...
}
```

---

## ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

### 1. ëª…ë ¹ì–´ ì‹¤í–‰ ë”œë ˆì´
```javascript
setTimeout(resolve, 150);  // ë¸”ë¡ ì„¤ì¹˜/íŒŒê´´
setTimeout(resolve, 200);  // ì—ì´ì „íŠ¸ ì´ë™
setTimeout(resolve, 50);   // íšŒì „
```
**ì´ìœ :** Minecraftì˜ ëª…ë ¹ì–´ ì²˜ë¦¬ ì†ë„ì— ë§ì¶¤

### 2. Map ê¸°ë°˜ ë ˆì§€ìŠ¤íŠ¸ë¦¬
- O(1) ì¡°íšŒ ì„±ëŠ¥
- ë©”ëª¨ë¦¬ íš¨ìœ¨ì 
- ë™ì‹œ ë‹¤ì¤‘ ëª…ë ¹ì–´ ì§€ì›

### 3. ë¹„ë™ê¸° ì²˜ë¦¬
- ëª¨ë“  ë¸”ë¡ ì‹¤í–‰ì€ ë¹„ë™ê¸° (async/await)
- ìˆœì°¨ ì‹¤í–‰ ë³´ì¥
- ì¤‘ì§€ ê¸°ëŠ¥ ì§€ì› (shouldStop í”Œë˜ê·¸)

---

## ë””ë²„ê¹… ë° ë¡œê¹…

### ë¡œê·¸ ë ˆë²¨

```javascript
console.log('âœ… ì„±ê³µ');           // ì„±ê³µì ì¸ ì‘ì—…
console.log('â¡ï¸ ì´ë™');           // ì´ë™ ëª…ë ¹
console.log('ğŸ—ï¸ ë¸”ë¡ ì„¤ì¹˜');      // ë¸”ë¡ ì„¤ì¹˜
console.log('ğŸ’¥ ë¸”ë¡ íŒŒê´´');       // ë¸”ë¡ íŒŒê´´
console.log('ğŸ® ëª…ë ¹ì–´ ì‹¤í–‰');     // ëª…ë ¹ì–´ ì‹¤í–‰
console.log('ğŸ“¦ ì•„ì´í…œ');          // ì•„ì´í…œ ê´€ë ¨
console.log('ğŸ” ë””ë²„ê·¸ ì •ë³´');     // ë””ë²„ê¹…
console.error('âŒ ì˜¤ë¥˜');         // ì—ëŸ¬
```

### ì£¼ìš” ë¡œê·¸ í¬ì¸íŠ¸

1. **ì„œë²„ ì‹œì‘:**
   ```
   ğŸ”¥ğŸ”¥ğŸ”¥ í”„ë¡œê·¸ë¨ íŒŒì¼ ë¡œë”© ì‹œì‘!
   âœ… ëª¨ë“  ëª¨ë“ˆ ë¡œë”© ì™„ë£Œ!
   ğŸ¯ğŸ¯ğŸ¯ í”„ë¡œê·¸ë¨ ì‹œì‘!
   ```

2. **ëª…ë ¹ì–´ ë“±ë¡:**
   ```
   === ëª…ë ¹ì–´ ë“±ë¡ ===
   ì´ ë“±ë¡ëœ ëª…ë ¹ì–´ ìˆ˜: N
   ```

3. **ëª…ë ¹ì–´ ì‹¤í–‰:**
   ```
   === ì±„íŒ… ë©”ì‹œì§€ ì´ë²¤íŠ¸ ìˆ˜ì‹  ===
   ë©”ì‹œì§€ ë‚´ìš©: "ì•ˆë…•"
   âœ… ëª…ë ¹ì–´ ì½”ë“œ ì‹¤í–‰ ì‹œì‘
   ```

4. **ì—ì´ì „íŠ¸ ëª…ë ¹:**
   ```
   â¡ï¸ ì•ìœ¼ë¡œ ì´ë™
   ğŸ—ï¸ ë¸”ë¡ ì„¤ì¹˜: forward
   ğŸ’¥ ë¸”ë¡ íŒŒê´´: forward
   ```

---

## í™•ì¥ ê°€ëŠ¥ì„±

### 1. ìƒˆë¡œìš´ ë¸”ë¡ ì¶”ê°€
1. `client/blockly/blocks.js`ì— ë¸”ë¡ ì •ì˜ ì¶”ê°€
2. `client/blockly/generators.js`ì— ì½”ë“œ ìƒì„±ê¸° ì¶”ê°€
3. Toolboxì— ë¸”ë¡ ì¹´í…Œê³ ë¦¬ ì¶”ê°€

### 2. ìƒˆë¡œìš´ ì´ë²¤íŠ¸ ì§€ì›
1. Minecraft ì´ë²¤íŠ¸ êµ¬ë… ì¶”ê°€
2. ì„œë²„ì— ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€
3. Hat ë¸”ë¡ ì¶”ê°€
4. ë“±ë¡/ì‹¤í–‰ ë¡œì§ ì¶”ê°€

### 3. í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ
- `shared/utils/` ë””ë ‰í† ë¦¬ í™œìš©
- ëª¨ë“ˆí™”ëœ í•¸ë“¤ëŸ¬ ë¶„ë¦¬ ê°€ëŠ¥
- ì»¤ìŠ¤í…€ ëª…ë ¹ì–´ ì¶”ê°€ ê°€ëŠ¥

---

## ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

### 1. ì—°ê²° ì‹¤íŒ¨
- CheckNetIsolation ëª…ë ¹ ì‹¤í–‰ í™•ì¸
- í¬íŠ¸ ì¶©ëŒ í™•ì¸ (3000-3050, 4000-4050)
- ë°©í™”ë²½ ì„¤ì • í™•ì¸

### 2. ëª…ë ¹ì–´ ì‹¤í–‰ ì•ˆë¨
- ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ Socket.IO ì—°ê²° ìƒíƒœ í™•ì¸
- ì„œë²„ ë¡œê·¸ì—ì„œ ì´ë²¤íŠ¸ ìˆ˜ì‹  í™•ì¸
- ë¸”ë¡ ë“±ë¡ ìƒíƒœ í™•ì¸

### 3. ì—ì´ì „íŠ¸ê°€ ë°˜ì‘í•˜ì§€ ì•ŠìŒ
- Minecraftì—ì„œ ì—ì´ì „íŠ¸ ìƒì„± í™•ì¸ (`/agent create`)
- WebSocket ì—°ê²° ìƒíƒœ í™•ì¸
- ëª…ë ¹ì–´ ë¬¸ë²• í™•ì¸

---

## í–¥í›„ ê°œì„  ë°©í–¥

### 1. ì•„í‚¤í…ì²˜ ê°œì„ 
- ëª¨ë†€ë¦¬ì‹ ì„œë²„ â†’ ëª¨ë“ˆí™”ëœ êµ¬ì¡°
- ëª…ë ¹ì–´ ë ˆì§€ìŠ¤íŠ¸ë¦¬ â†’ ë°ì´í„°ë² ì´ìŠ¤
- ì„¸ì…˜ ê´€ë¦¬ ì¶”ê°€

### 2. ê¸°ëŠ¥ ì¶”ê°€
- ë¸”ë¡ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
- ê³µìœ  ê¸°ëŠ¥
- ì‹¤ì‹œê°„ í˜‘ì—…
- ë³€ìˆ˜ ë””ë²„ê¹…

### 3. ì„±ëŠ¥ ìµœì í™”
- ëª…ë ¹ì–´ í ì‹œìŠ¤í…œ
- ìºì‹± ì „ëµ
- ì—°ê²° í’€ë§

---

ì´ ë¬¸ì„œëŠ” ì‹œìŠ¤í…œì˜ ì „ì²´ì ì¸ ì‘ë™ ì›ë¦¬ë¥¼ ì´í•´í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ê¸° ìœ„í•´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
ì‹¤ì œ ì½”ë“œ êµ¬í˜„ ì‹œ `server/index.js`, `client/main.js`, `client/blockly/` íŒŒì¼ë“¤ì„ ì°¸ì¡°í•˜ì„¸ìš”.
